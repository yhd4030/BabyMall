<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/css/cart.css}"/>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/bs.css}"/>
    <link rel="stylesheet" th:href="@{/css/mc-dialoger.css}"/>
    <link rel="stylesheet" th:href="@{/css/orderInfo.css}">

    <script type="text/javascript" th:src="@{/js/jquery-3.4.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dialoger.js}"></script>
    <script type="text/javascript" th:src="@{/js/domlastic.js}"></script>

</head>
<body>
<div th:insert="~{top ::top}"></div>
<div class="container" style="border: 4px solid #f5f5f5;">
    <div class="tip_div">
        <div id="success">
            <span class="success_text">准备支付</span>
        </div>
        <div class="things">
            <form th:action="@{/order/aliPay}" method="post">
                <p>
                    <label style="width: 70px">订单号：</label>
                    <input type="text" name="out_trade_no" th:value="${orderDAO.get(0).order_num}" value="0" readonly>
                </p>
                <p >
                    <label>商品名称：</label>
                    <input type="text" name="subject" th:value="${orderDAO.get(0).orderItems.get(0).shopProduct.productName}"
                           value="0">
                </p>
                <p >
                    <label>商品描述：</label>
                    <input type="text" name="body"
                           th:value="${orderDAO.get(0).orderItems.get(0).shopProduct.productName}"
                           value="0" readonly>
                </p>
                <p >
                    <label>商品码：</label>
                    <input type="text" name="product_code"
                           th:value="${orderDAO.get(0).order_num}"
                           value="0" readonly>
                </p>
                <p hidden="hidden">
                    <input type="text" name="timeout_express" value="1h">
                </p>
                <p>
                    <label>支付金额：</label>
                    <input type="text" name="total_amount" th:value="${orderDAO.get(0).order_total}" value="0">
                </p>
                <div class="next_div">

                    <button type="submit" th:if="${orderDAO.get(0).order_status}==0" class="toCart">支付</button>
                    <a href="javascript:void(0);" th:if="${orderDAO.get(0).order_status}==1" class="toShopping"
                       style="background-color: rgb(139,202,58)">付款成功</a>
                    <a href="/order/toOrderList" class="toShopping">查看所有订单</a>

                </div>
            </form>

        </div>
    </div>
    <div class="row">
        <h1 class="title order_title">订单详情</h1>
    </div>

    <div class="row" id="order_table_div">
        <table id="order_table" border="0" cellpadding="0" cellspacing="0">
            <thead>
            <tr id="table_head">
                <th width="20%" class="tcol1">商品信息</th>
                <th width="10%">单价（元）</th>
                <th width="10%">数量</th>
                <th width="10%">总价（元）</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="order:${orderDAO}" class="order_item">
                <td>
                    <a th:href="'/product/info/'+${order.orderItems.get(0).product_id}"><img
                            th:src="${order.orderItems.get(0).shopProduct.productImg}" width="20%"/></a>
                    <a th:href="'/product/info/'+${order.orderItems.get(0).product_id}"><span
                            th:text="${order.orderItems.get(0).shopProduct.productName}"
                            class="product_name"></span></a>
                </td>
                <td>
                    <span class="red">￥</span>
                    <span class="red"
                          th:text="${order.orderItems.get(0).shopProduct.price.multiply(order.orderItems.get(0).shopProduct.discount).setScale(2)}"></span>
                </td>
                <td>
                    <span th:text="${order.orderItems.get(0).amount}"></span>
                </td>
                <td>
                    <span class="red">￥</span>
                    <span class="red"
                          th:text="${order.orderItems.get(0).shopProduct.price.multiply(order.orderItems.get(0).shopProduct.discount).setScale(2).multiply(order.orderItems.get(0).amount)}"></span>
                </td>
            </tr>

            <tr class="tfoot">
                <td class="tcol1">
                    <span>店铺合计	</span>
                </td>
                <td></td>
                <td></td>
                <td class="shop_total">￥
                    <span id="orderTotal" th:text="${orderDAO.get(0).order_total.setScale(2)}"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</div>
</body>
</html>